<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JobbÃ¶rse - Oberlinhaus Werkstatt</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <main class="container page-content"></main>

  <script src="../components/storage.js"></script>
  <script src="../components/api.js"></script>
  <script src="../components/ui.js"></script>
  <script src="../components/header.js"></script>
  <script>
    async function initPage() {
      const container = document.querySelector("main");
      const contentDiv = document.createElement("section");
      contentDiv.className = "page-section";

      // Header
      container.appendChild(renderHeader("JobbÃ¶rse", true));

      const data = await API.loadJSON("jobs");
      const isEasyLang = Storage.get("easyLang", false);

      if (!data || !data.jobs || data.jobs.length === 0) {
        const emptyDiv = document.createElement("div");
        emptyDiv.className = "info-box highlight";
        emptyDiv.innerHTML = `
          <h3>ðŸ”¨ JobbÃ¶rse</h3>
          <p>Aktuell sind keine Job-Angebote verfÃ¼gbar.</p>
        `;
        contentDiv.appendChild(emptyDiv);
      } else {
        const jobsGrid = document.createElement("div");
        jobsGrid.className = "grid";

        data.jobs.forEach((job) => {
          const jobCard = document.createElement("article");
          jobCard.className = "card";

          if (isEasyLang) {
            jobCard.innerHTML = `
              <h3>${job.titel}</h3>
              <p>${job.text_easy}</p>
              <p><small>${job.ort} Â· ${job.arbeitszeit}</small></p>
            `;
          } else {
            jobCard.innerHTML = `
              <h3>${job.titel}</h3>
              <p><strong>Ort:</strong> ${job.ort}</p>
              <p><strong>Arbeitszeit:</strong> ${job.arbeitszeit}</p>
              <p>${job.beschreibung}</p>
              <p><strong>Anforderungen:</strong> ${job.anforderungen}</p>
              <p><strong>Ansprechperson:</strong> ${job.ansprechpartner}</p>
            `;
          }

          jobsGrid.appendChild(jobCard);
        });

        contentDiv.appendChild(jobsGrid);
      }

      const contactDiv = document.createElement("div");
      contactDiv.className = "help-box";
      contactDiv.innerHTML = `
        <strong>ðŸ“ž Jobcoaching:</strong>
        <p>Tobias hilft dir bei der Jobsuche und Bewerbungen.</p>
        <p><small>Kontakt: 030-555020 (Mo-Fr 08:30-16:00)</small></p>
        <a href="./kontakt.html" class="btn" style="display: inline-block; margin-top: 1rem;">
          Zu den Ansprechpartnern
        </a>
      `;

      contentDiv.appendChild(contactDiv);

      container.appendChild(contentDiv);
      container.appendChild(renderFooter("main.page-content"));
    }

    initPage();
  </script>
</body>
</html>
